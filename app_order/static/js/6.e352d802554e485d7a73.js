webpackJsonp([6],{Wihc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("BO1k"),o=n.n(r),a=n("2CGT"),i=n("6bRL"),s={name:"index",components:{},data:function(){return{orderQuery:[],currentPage:0,isLoading:!1,finished:!1,formData:"",refreshing:!1}},computed:{},watch:{},methods:{go:function(e){this.$router.push(e)},onClickLeft:function(){this.$router.go(-1)},onLoad:function(){this.currentPage+=1,this.getOrderQuery()},orderPay:function(e){var t=this,n={token:this.$store.getters.getToken.token,userId:this.$store.getters.getToken.userId,orderId:e.orderId};Object(a.g)(n).then(function(e){t.formData=e.data,t.$nextTick(function(){document.forms[0].submit()})})},getOrderQuery:function(){var e=this;setTimeout(function(){e.refreshing&&(e.refreshing=!1,e.currentPage=1,e.orderQuery=[]);var t={token:e.$store.state.token.token,userId:e.$store.state.token.userId,pageNum:e.currentPage};Object(a.h)(t).then(function(t){var n=!0,r=!1,a=void 0;try{for(var s,c=o()(t.data.list);!(n=(s=c.next()).done);n=!0){var u=s.value;u.orderTime=Object(i.a)("YYYY-mm-dd HH:MM:SS",new Date(u.orderTime)),e.orderQuery.push(u)}}catch(e){r=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw a}}e.isLoading=!1,!1===t.data.hasNextPage&&(e.finished=!0)})},500)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("van-nav-bar",{staticStyle:{"box-shadow":"0 3px 10px rgba(127, 127, 127, 0.06)"},attrs:{"left-arrow":"",title:"订单"},on:{"click-left":e.onClickLeft},scopedSlots:e._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left",color:"#000000"}})]},proxy:!0},{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"ellipsis",color:"#000000"}}),e._v(" \n      "),n("van-icon",{attrs:{name:"browsing-history-o",color:"#000000"}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"app-body"},[n("van-pull-refresh",{on:{refresh:e.getOrderQuery},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},e._l(e.orderQuery,function(t,r){return n("div",{key:r,staticClass:"app-card",on:{click:function(n){return e.go({name:"orderDetail",params:{item:t}})}}},[n("van-cell"),e._v(" "),n("van-cell",{attrs:{title:t.businessName}},[n("span",{style:"待支付"===t.orderStatusName?"color: #FE694C":""},[e._v(e._s(t.orderStatusName))])]),e._v(" "),n("van-cell",[n("span",{staticStyle:{color:"#BBBBBB","font-size":"12px"}},[e._v(e._s(t.orderTime))])]),e._v(" "),n("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n              共"+e._s(t.productList.length)+"件,合计:￥"),n("span",{staticStyle:{"font-size":"28px"}},[e._v(e._s((t.actuallyAmount/100).toFixed(2)))])]},proxy:!0}],null,!0)},[e._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},["待支付"===t.orderStatusName?n("van-button",{staticStyle:{height:"30px"},attrs:{type:"info",color:"#FE694C"},on:{click:function(n){return n.stopPropagation(),e.orderPay(t)}}},[e._v("去支付")]):e._e()],1)])],1)}),0)],1)],1),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.formData)}})],1)},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(e){n("wHc+"),n("YZwC")},"data-v-9ba6d0a6",null);t.default=u.exports},YZwC:function(e,t){},"wHc+":function(e,t){}});
//# sourceMappingURL=6.e352d802554e485d7a73.js.map