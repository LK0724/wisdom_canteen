webpackJsonp([12],{hdQW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("BO1k"),s=n.n(i),r=n("2CGT"),a={name:"merchant",components:{},data:function(){return{active:"QB",businessList:[],businessTypeList:[],currentPage:1,isLoading:!1,finished:!1,refreshing:!1}},computed:{},watch:{},methods:{onClickLeft:function(){this.$router.go(-1)},onLoad:function(){1!==this.currentPage&&(this.currentPage+=1,this.getMerchant())},onChange:function(){this.businessList=[],this.finished=!1,this.refreshing=!0,this.currentPage=1,this.getMerchant()},getMerchant:function(){var e=this;setTimeout(function(){e.refreshing&&(e.refreshing=!1,e.currentPage=1,e.businessList=[]);var t={token:e.$store.state.token,pageNum:e.currentPage,searchKey:"",businessType:e.active,longitude:e.$store.getters.getLocation.longitude,latitude:e.$store.getters.getLocation.latitude};Object(r.a)(t).then(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=s()(t.data.businessList.list);!(n=(a=o.next()).done);n=!0){var c=a.value;e.businessList.push(c)}}catch(e){i=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}e.businessTypeList=t.data.businessTypeList,e.isLoading=!1,!1===t.data.businessList.hasNextPage&&(e.finished=!0)})},10)}},created:function(){this.getMerchant()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("van-nav-bar",{staticStyle:{"box-shadow":"0 3px 10px rgba(127, 127, 127, 0.06)"},attrs:{"left-arrow":"",title:"智慧食堂"},on:{"click-left":e.onClickLeft},scopedSlots:e._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left",color:"#000000"}})]},proxy:!0},{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"ellipsis",color:"#000000"}}),e._v(" \n          "),n("van-icon",{attrs:{name:"browsing-history-o",color:"#000000"}})]},proxy:!0}])}),e._v(" "),n("van-tabs",{attrs:{"line-width":"11","line-height":"4","title-active-color":"#FE694C"},on:{change:e.onChange},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.businessTypeList,function(t,i){return n("van-tab",{key:i,staticStyle:{height:"calc(100vh - 90px)",overflow:"scroll"},attrs:{title:t.typeName,name:t.typeCode}},[n("van-pull-refresh",{on:{refresh:e.onChange},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},e._l(e.businessList,function(t,i){return n("van-card",{key:i,staticClass:"app-card",attrs:{title:t.businessName,thumb:t.businessImage},on:{click:function(n){return e.$router.push({path:"/menus",query:{businessId:t.businessId}})}},scopedSlots:e._u([{key:"desc",fn:function(){return[n("p",{staticStyle:{"line-height":"5px",color:"#BBBBBB","font-size":"10px"}},[e._v(e._s(null==t.businessLabel?"暂无":t.businessLabel))])]},proxy:!0},{key:"tags",fn:function(){return[n("span",{staticStyle:{"line-height":"5px",color:"#BBBBBB","font-size":"10px"}},[e._v("月售："+e._s(t.saleNum))])]},proxy:!0},{key:"price",fn:function(){return[n("div",{staticStyle:{"font-size":"8px",border:"1px solid #FE694C","border-radius":"2px",padding:"1px 5px"}},[n("p",{staticStyle:{"line-height":"5px",color:"#FE694C"}},[e._v(e._s(null==t.discountTxt?"暂无优惠":t.discountTxt))])])]},proxy:!0}],null,!0)})}),1)],1)],1)}),1)],1)},staticRenderFns:[]};var c=n("VU/8")(a,o,!1,function(e){n("teqq")},"data-v-50f17e34",null);t.default=c.exports},teqq:function(e,t){}});
//# sourceMappingURL=12.569fd87ec7100472dea5.js.map